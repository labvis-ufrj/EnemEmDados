<body>
	<head>
		<meta charset="UTF-8">
		<title>PESSOAS/FAIXA ETÁRIA</title>
		<script src="../d3.v3.min.js"></script>
		<script type="text/javascript" src="editavel.js"></script>
		<script type="text/javascript" src="VisIdade.js"></script>
		<link href="../bootstrap.min.css" rel="stylesheet">
		<link type="text/css" rel="stylesheet" href="VisIdade.css"/>
		<link href="../template.css" rel="stylesheet">
	</head>
	<body>
		    <div class="container" align="middle">
			    <div class="header clearfix">
			    	<div class="links">
				        <nav>
				        	<ul class="nav nav-pills pull-left">
				        		<li class="li1" role="presentation" padding-top= "10px"><a href="../index.html"><p class="indice1">enem</p><p class="indice2">em_dados</p></a></li>
								<li class="li2" role="presentation"><a href="../VisMapa/index.html">MÉDIAS POR REGIÃO</a></li>
								<li class="li3" role="presentation"><a href="../VisGeral/index.html">MÉDIAS ORDENADAS</a></li>
								<li class="li4 active" role="presentation" ><a href="../VisIdade/index.html">PESSOAS/FAIXA ETÁRIA</a></li>
							</ul>
						</nav>
					</div>
					<div class="logos">
						<nav>
					        <ul class="nav nav-pills pull-right">
						        <li role="presentation"><a href="https://labvis.eba.ufrj.br/"><img src="../imgs/labvis.png" alt="Lab Vis"  height="50" border="0"></a></li>
						        <li role="presentation"><a href="https://ufrj.br/"><img src="../imgs/eba.png" alt="Eba" height="50" border="0"></a></li>
						        <li role="presentation"><a href="http://www.eba.ufrj.br/"><img src="../imgs/logo_ufrj.png" alt="UFRJ" height="50" border="0"></a></li>
					        </ul>
				        </nav> 
				    </div>
				</div>
		    </div>

		<div id="menus"></div>
		<div align="center" class="visualizacao"></div>
		<script type="text/javascript">



			var nomeDoEstado = {Brasil: "Brasil",	
				        			AC:"Acre",	 
									AL:"Alagoas",	 
									AM:"Amazonas",	 
									AP:"Amapá",	 
									BA:"Bahia",	 
									CE:"Ceará",	 
									DF:"Distrito Federal",	 
									ES:"Espírito Santo",	 
									GO:"Goiás",	 
									MA:"Maranhão",	 
									MG:"Minas Gerais",	 
									MS:"Mato Grosso do Sul",	 
									MT:"Mato Grosso",	 
									PA:"Pará",	 
									PB:"Paraíba",	 
									PE:"Pernambuco",	 
									PI:"Piauí",	 
									PR:"Paraná",	 
									RJ:"Rio de Janeiro",	 
									RN:"Rio Grande do Norte",	 
									RO:"Rondônia",	 
									RR:"Roraima",	 
									RS:"Rio Grande do Sul",	 
									SC:"Santa Catarina",	 
									SE:"Sergipe",	 
									SP:"São Paulo",	 
									TO:"Tocantins"};
							


			var vis = d3.select("div.visualizacao").append("svg")
		         .attr("width", "100%")
		         .attr("height","90%");

/*
			  var tooltip = d3.select("body")
			      .append("div")
			      .style("position", "absolute")
			      .style("z-index", "10")
			      .style("visibility", "hidden")
			      .text("a simple tooltip")
			      .style("font-size","15px");
*/	

		vis.selectAll(".textinhoIndice")
			.data([0])
			.enter()
			.append("text")
			.attr("class", "textinhoIndice")
			.text("Localidade")
			.attr("x", textinhoX)
			.attr("y", textinhoIndiceY);	

		var textoGroup = vis.selectAll(".textoGroup")
					.data([0])
					.enter()
					.append("g")
					.attr("class","textoG");

		var  texto = textoGroup.selectAll(".textinhoExplicacao")
					.data(textoVector)
					.enter()
					.append("text")
					.attr("class","textinhoExplicacao")
					.text(function(d, i){return d;})
					.attr("x", function(d, i) { return textinhoX; })
					.attr("y", function(d, i){ return textinhoY + 15*i;})


			var subject = "";
			var estadoAtual = "";
		    var upcase = {geral: "Geral", humanas:"Humanas", linguagens:"Linguagens", natureza:"Natureza", matematica:"Matemática", redacao:"Redação"};

		     var dataset = [];
		     var ageScale;
		     var gradeScale;
		     var quantScale;

		    //imagem = 
			/*
		    vis.selectAll(".imagem")
		    	.data([0])
		    	.enter()
		    	.append("svg:image")
		    	.attr("class","imagem")
				.attr('x',window.innerWidth*.045)
				.attr('y',450)
				.attr('width',365* .6)
				.attr('height', 289*.6)
				.attr("xlink:href","./explicacao_idade.png");
*/

			//d3.csv("MEDIAS_VIS_AGE2.csv",function(data){
			d3.csv("./estados/Brasil.csv",function(data){	
				dataset = data ;
				//console.log(dataset);
	      

			maxQuant = maxVal = minVal = minQuant = 0;

			var subjects = ["geral",
							"matematica",
		                    "linguagens",
		                    "humanas", 
		                    "natureza",
		                    "redacao"];
			
		    var sub = 0;
				maxVal = minVal = Number(dataset[0][subjects[0]]);
			for (sub= 0; sub< subjects.length; sub++){
				for (indice = 0; indice < dataset.length ; indice++){
					if (Number(dataset[indice][subjects[sub]]) > maxVal){
						maxVal = Number(dataset[indice][subjects[sub]]);
					};
					if (Number(dataset[indice][subjects[sub]]) < minVal){
						minVal = Number(dataset[indice][subjects[sub]]);
					};
					if (Number(dataset[indice].quantidade) > maxQuant){
						maxQuant = Number(dataset[indice].quantidade);
					};
					if (Number(dataset[indice].quantidade) < minQuant){
						minQuant = Number(dataset[indice].quantidade);
					};
				};
			};
			var primeiraIdade = 0;
			while (1){
				if (dataset[primeiraIdade].quantidade != "0"){break}
				primeiraIdade++;
			};
			var ultimaIdade = dataset.length - 1;
			while (1){
				if (dataset[ultimaIdade].quantidade != "0"){break}
				ultimaIdade--;
			};

			var gradeScale2 = d3.scale.linear()
//			    .domain([minVal*0.975, maxVal*1.025])
				.domain([280, 590])
			    .range([tamanhoy, 0]);

			var ageScale2 = d3.scale.linear()
			    .domain([Number(dataset[0].idade),Number(dataset[dataset.length-1].idade) + 1])
			    .range([0,tamanhox]);



			var quantScale2 = d3.scale.linear()
			    .domain([0, maxQuant*1.05])
			    .range([tamanhoy, 0]);


			 ageScale = ageScale2;
			 gradeScale = gradeScale2;
			 quantScale = quantScale2;


			estadoAtual = "Brasil";
			subject = "geral";
		makeMenu(subject);
        VisIdade(""+subject, dataset);


			visAuxiliares = vis.selectAll(".visAuxiliares")
			.data([0])
		   	.enter()
		    .append("g")
		    .attr("class", "visAuxiliares")
			.attr("transform",function(d,i){return "translate(" + posicaoGroupAuxX + "," + posicaoGroupAuxY + ")";});

			visAuxiliares.selectAll(".selected")
				.data([1])
				.enter()
				.append("rect")
				.attr("class", "selected")
				.attr("width",tamanhoAuxX*1.2)
				.attr("height",tamanhoAuxY*1.2)
		  		.attr("x", posicaoAux[0].x - tamanhoAuxX*0.1)
		  		.attr("y", posicaoAux[0].y - tamanhoAuxY*0.1);

	        subjects = ["geral",
	                    "linguagens",
	                    "humanas", 
	                    "natureza",
	                    "redacao",
	                    "matematica"];

			for (var num = 0; num < subjects.length; num++){
				makeVisAuxiliar(num, subjects[num], dataset);
			}
	    });




		</script>
	</body>
</body>