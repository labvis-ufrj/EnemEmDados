<body>
	<head>
		<meta charset="UTF-8">
		<title>MÉDIAS POR REGIÃO</title>
		<style>
			@font-face {
				font-family: Roboto Slab;
				src: url("../Roboto_Slab/RobotoSlab-Bold.ttf") /* TTF file for CSS3 browsers */
			}
			@font-face {
				font-family: Ubuntu;
				src: url("../Ubuntu/Ubuntu-Regular.ttf") /* TTF file for CSS3 browsers */
			}
		</style>
		<script src="../d3.v3.min.js"></script>
		<script type="text/javascript" src="editavel.js"></script>
		<script type="text/javascript" src="VisMap.js"></script>
		<link href="../bootstrap.min.css" rel="stylesheet">	
		<link href="../template.css" rel="stylesheet">
		<link type="text/css" rel="stylesheet" href="VisMap.css"/>
	</head>
	<body>

	    <div class="container" align="middle">
		    <div class="header clearfix">
		    	<div class="links">
			        <nav>
			        	<ul class="nav nav-pills pull-left">
			        		<li  class="li1" role="presentation" padding-top= "10px"><a href="../index.html"><p class="indice1">enem</p><p class="indice2">em_dados</p></a></li>
				            <li class="li2 active" role="presentation"><a href="../VisMapa/index.html">MÉDIAS POR REGIÃO</a></li>
				            <li class="li3" role="presentation"><a href="../VisGeral/index.html">MÉDIAS ORDENADAS</a></li>
			            	<li class="li4" role="presentation" ><a href="../VisIdade/index.html">PESSOAS/FAIXA ETÁRIA</a></li>
						</ul>
					</nav>
				</div>
				<div class="logos">
					<nav>
				        <ul class="nav nav-pills pull-right">
					        <li role="presentation"><a href="https://labvis.eba.ufrj.br/"><img src="../imgs/labvis.png" alt="Lab Vis"  height="50" border="0"></a></li>
					        <li role="presentation"><a href="https://ufrj.br/"><img src="../imgs/eba.png" alt="Eba" height="50" border="0"></a></li>
					        <li role="presentation"><a href="http://www.eba.ufrj.br/"><img src="../imgs/logo_ufrj.png" alt="UFRJ" height="50" border="0"></a></li>
				        </ul>
			        </nav> 
			    </div>
			</div>
	    </div>


		<div id="menus"></div>
		<div align="center" class="visualizacao"></div>
		<script type="text/javascript">
			
	        var traducao = {Matematica: "Matemática",
			            Linguagens: "Linguagens",
			            Humanas: " Ciên. Humanas", 
			            Natureza: "Ciên. Natureza",
			            Redacao: "Redação",
						Geral: "Média geral"};


			var svg = d3.select("div.visualizacao").append("svg")
		         .attr("width", "100%")
		         .attr("height","90%");

		    var vis = svg.selectAll(".graf")
		    		.data([0])
		    		.enter()
		    		.append("g")
		    		.attr("class", "graf");

		    var gradiente = svg.selectAll(".gradiente")
		    		.data([0])
		    		.enter()
		    		.append("g")
		    		.attr("class", "gradiente")
		    		.attr("transform", "translate(" + gradientX + "," + gradientY + ")");

		    // Create the svg:defs element and the main gradient definition.
	        var gradient = gradiente.append("defs")
	          .append("linearGradient")
	            .attr("id", "gradient")
	            .attr("x1", "0%")
	            .attr("x2", "100%")
	            .attr("spreadMethod", "pad");

 	        var gradient2 = gradiente.append("defs")
	        	.append("linearGradient")
	            .attr("id", "gradient2")
	            .attr("x1", "0%")
	            .attr("x2", "100%")
	            .attr("spreadMethod", "pad");

/*
			  var tooltip = d3.select("body")
			      .append("div")
			      .style("position", "absolute")
			      .style("z-index", "10")
			      .style("visibility", "hidden")
			      .text("a simple tooltip")
			      .style("font-size","15px");
*/	
/*
		    vis.selectAll(".imagem")
		    	.data([0])
		    	.enter()
		    	.append("svg:image")
		    	.attr("class","imagem")
				.attr('x',window.innerWidth*.045)
				.attr('y',450)
				.attr('width',365* .6)
				.attr('height', 139*.6)
				.attr("xlink:href","./explicacao_mapa.png");

*/
			var dataset = [];
			d3.csv("tabelaVisMapaComGeral.csv",function(data){
				dataset = data ;
				//console.log(dataset);
/*	      

	        var subjectMenu = d3.select("#menus").append("select").attr("id", "subjectMenu");
	        var prod = ["Matematica",
	                    "Linguagens",
	                    "Humanas", 
	                    "Natureza",
	                    "Redacao"];
	        subjectMenu.selectAll("option").data(prod).enter().append("option")
	          .attr("value", function (d) { return d })
	          .text(function (d) { return d });

	        var subject = prod[0];

	        d3.select("#subjectMenu").on("change", function() {
	        	map.remove();
	          subject = d3.select("#subjectMenu").property("value");
	          VisMap(""+subject);
	        });
*/


/*
		svg.selectAll(".textinho")
			.data([0])
			.enter()
			.append("text")
			.attr("class", "textinho")
			.text("Classificar por")
			.attr("x", textinhoX)
			.attr("y", textinhoY);
*/
        var prod = ["Geral",
					"Matematica",
                    "Linguagens",
                    "Humanas", 
                    "Natureza",
                    "Redacao"];

        var subject = prod[0];

/*
		menu.selectAll(".options")
			.data(prod)
			.enter()
			.append("text")
			.text( function (d) { return "" + traducao[d]; })
	        .attr("x", function(d, i) { return 40; })
			.attr("y", function(d, i){ return i*espacoEntreMenus + 30;})
			.attr("class", "options")
			.on("click", function(d, i){
				//map.remove();
				visMapUpgrade("" + d);
				d3.selectAll(".options").style("font-weight","normal");
				d3.select(this).style("font-weight","bold"); 	
			
				menu.selectAll(".selected")
					.transition()
					.attr("y", function(){ return i*espacoEntreMenus + menuBoxY;})
					.duration(1000);

			});*/


		var textoGroup = svg.selectAll(".textoGroup")
					.data([0])
					.enter()
					.append("g")
					.attr("class","textoGroup");

		var  texto = textoGroup.selectAll(".textinho")
					.data(textoVector)
					.enter()
					.append("text")
					.attr("class","textinho")
					.text(function(d, i){return d;})
					.attr("x", function(d, i) { return textinhoX; })
					.attr("y", function(d, i){ return textinhoY + 15*i;})
			

		var nomesDisciplinasGroup = svg.selectAll(".nomesDisciplinasGroup")
					.data([0])
					.enter()
					.append("g")
					.attr("class","nomesDisciplinasGroup");
	var subjects = ["Geral",
					"Linguagens",
					"Humanas", 
					"Natureza",
					"Redacao",
					"Matematica"];



		var  nomesDisciplinas = textoGroup.selectAll(".nomesDisciplinas")
					.data(subjects)
					.enter()
					.append("text")
					.attr("class","nomesDisciplinas")
					.text(function(d, i){return traducao[d];})
					.attr("x", function(d, i) { return posicaoAux[i].x +10; })
					.attr("y", function(d, i){ return posicaoAux[i].y-5;})



	        VisMap(""+subject);
	        subjects = ["Geral",
                "Linguagens",
                "Humanas", 
                "Natureza",
                "Redacao",
                "Matematica"];

			for (var num = 0; num < subjects.length; num++){
				makeVisAuxiliar(num, subjects[num], dataset);
			}


		var selected = vis.selectAll(".selected")
			.data([0])
			.enter();

			selected.append("rect")
			.attr("class", "selected")
			.attr("width", menuBoxWidth)
			.attr("height", menuBoxHeigth)
			.attr("x", function(){ return menuBoxX + 3;})
			.attr("y", function(){ return menuBoxY;});

	      });

//console.log(window.innerWidth);


		</script>
	</body>
</body>